<div class="pagina-detalhes">
  <!-- Bot√£o de Voltar -->
  <button class="btn-voltar" (click)="voltar()">‚Üê Voltar</button>

  <!-- Loading e Erro -->
  <div *ngIf="carregando" class="loading">Carregando...</div>
  <div *ngIf="erro" class="erro">{{ erro }}</div>

  <!-- Conte√∫do do Livro -->
  <div *ngIf="!carregando && !erro && livro" class="conteudo">
    
    <!-- Se√ß√£o Principal -->
    <div class="secao-principal">
      
      <!-- Capa do Livro -->
      <div class="capa-container">
        <img [src]="livro.capa_livro || 'assets/placeholder-book.jpg'" 
             [alt]="livro.titulo" class="capa-livro">
      </div>

      <!-- Informa√ß√µes e A√ß√µes -->
      <div class="info-container">
        <h1 class="titulo-livro">{{ livro.titulo }}</h1>

        <!-- Status e A√ß√µes -->
        <div class="status-icons">
          <button class="icon-btn" title="Visualizado">üëÅÔ∏è</button>
          <button 
            class="icon-btn" 
            [class.active]="livroFinalizado"
            (click)="toggleFinalizado()"
            title="Marcar como conclu√≠do">
            ‚è±Ô∏è {{ livroFinalizado ? 'Livro conclu√≠do' : 'Marcar conclu√≠do' }}
          </button>
          <button class="icon-btn" title="Favorito">‚ô•Ô∏è</button>
        </div>

        <!-- Avalia√ß√£o -->
        <div class="avaliacao-section">
          <h3>Sua Avalia√ß√£o</h3>
          <div class="estrelas">
            <span *ngFor="let star of getRatingArray()" 
                  class="estrela" 
                  [class.filled]="star <= (hoverRating || avaliacaoUsuario)"
                  (click)="setRating(star)"
                  (mouseenter)="setHoverRating(star)"
                  (mouseleave)="resetHoverRating()">
              ‚òÖ
            </span>
          </div>
        </div>

        <!-- Descri√ß√£o -->
        <div class="descricao-section">
          <h3>Sobre o Livro</h3>
          <p class="descricao">{{ livro.descricao }}</p>
        </div>
      </div>
    </div>

    <!-- Se√ß√£o de Coment√°rio -->
    <div class="secao-comentario">
      <h3>Seu Coment√°rio</h3>
      <textarea [(ngModel)]="comentarioUsuario"
                placeholder="Escreva seu coment√°rio aqui..."
                rows="5"
                class="comentario-input"></textarea>
      <button class="btn-salvar" (click)="salvarAvaliacao()">Salvar Avalia√ß√£o</button>
    </div>

    <!-- Informa√ß√µes do Autor -->
    <div class="secao-autor">
      <h2>Sobre o Autor</h2>
      <div class="autor-info">
        <div class="autor-foto">
          <div class="placeholder-foto">
            <img class="autor-foto" [src]="livro.foto_autor" alt="">
          </div>
        </div>
        <div class="autor-texto">
          <h3>{{ livro.autor }}</h3>
          <p class="autor-bio">{{ livro.biografiaAutor }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
